{"version":3,"sources":["components/Modal.jsx","components/Header.jsx","pages/Compra.jsx"],"names":["Modal","state","show","prevProps","prevState","_snapshot","this","props","setState","close","id","modal","className","tabIndex","role","style","display","dados","status","backgroundColor","icon","faExclamationTriangle","faExclamationCircle","type","aria-label","onClick","clickClose","aria-hidden","data","JSON","stringify","Component","Header","showModal","responseData","event","preventDefault","axios","get","then","res","console","log","window","location","catch","error","href","src","alt","data-toggle","data-target","aria-controls","aria-expanded","getCookie","faUserEdit","faMoneyBillWave","faShoppingCart","clickLogoff","faSignOutAlt","faSignInAlt","faUserCog","Compra","codigo","valor","params","match","ret","moment","format","toString","replace","length","post","maskedvalue","floatvalue","htmlFor","name","onChange","target","value","defaultValue","required","autoFocus","max","prefix","decimalSeparator","thousandSeparator","decimalScale","allowNegative","fixedDecimalScale","onValueChange","object","clickSalvar"],"mappings":"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","file":"static/js/8.b1ebf94f.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle, faExclamationCircle } from '@fortawesome/free-solid-svg-icons';\n\nimport './Modal.css';\n\nclass Modal extends Component {\n    state = {\n        show: false\n    }\n\n    componentDidUpdate(prevProps, prevState, _snapshot) {\n        if(prevProps.show !== this.props.show) {\n            this.setState({show: this.props.show});\n        }\n    }\n\n    clickClose() {\n        this.setState({show: false});\n        this.props.close(false);\n    }\n\n    render() {\n        return (\n            <div id={'modal-'+(this.props.modal ? this.props.modal : 'mensagem')} className=\"modal\" tabIndex=\"-1\" role=\"dialog\" style={this.state.show ? {display: 'block'} : {display: 'none'}}>\n              <div className=\"modal-dialog\" role=\"document\">\n                <div className=\"modal-content\">\n                  <div className=\"modal-header\" style={this.props.dados.status === 'error' ? {backgroundColor: 'red'} : {backgroundColor: 'black'}}>\n                    <h5 className=\"modal-title\">\n                        <FontAwesomeIcon icon={this.props.dados.status === 'error' ? faExclamationTriangle : faExclamationCircle}/> {this.props.dados.status === 'error' ? 'ERRO' : 'AVISO'}\n                    </h5>\n                    <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={() => this.clickClose()}>\n                      <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                  </div>\n                  <div className=\"modal-body\">\n                    <p>{typeof this.props.dados.data === 'object' ? JSON.stringify(this.props.dados.data) : this.props.dados.data}</p>\n                  </div>\n                  <div className=\"modal-footer\">\n                    <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.clickClose()}>Ok</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import React,  { Component } from 'react'\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSignInAlt, faUserEdit, faShoppingCart, faMoneyBillWave, faUserCog, faSignOutAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport './Header.css';\nimport { getCookie } from '../libs/cookies.js';\n\nimport Modal from './Modal';\n\nclass Header extends Component {\n    state = {\n        showModal: false,\n        responseData: {}\n    }\n\n    componentDidMount() {}\n\n    clickLogoff(event) {\n        event.preventDefault();\n        axios.get('/api/v1/logout').then((res) => {\n            let data = res.data;\n            console.log('logout: ', data);\n            if(data.status === 'ok') {\n                window.location = '/';\n            } else {\n                this.setState({ responseData: data, showModal: true });\n            } \n        }).catch((error) => {\n            console.log(error);\n        });\n    }\n\n    render() {\n      return (\n        <>\n        <nav className=\"navbar navbar-expand-lg navbar-light navbar-header\">\n            <div className=\"container\">\n                <a className=\"navbar-brand d-flex align-items-center\" href=\"/\">\n                    <img className=\"logo\" src=\"/assets/images/icon.png\" alt=\"App DGB\"/>App DGB\n                </a>\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span className=\"navbar-toggler-icon\"></span>\n                </button>\n\n                <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                    <ul className=\"navbar-nav ml-auto\">\n                        { getCookie('token') ?\n                            <>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/perfil\"><FontAwesomeIcon icon={faUserEdit}/> Meu Perfil</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/cashback\"><FontAwesomeIcon icon={faMoneyBillWave}/> Meu Cashback</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/compras\"><FontAwesomeIcon icon={faShoppingCart}/> Minhas Compras</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/\" onClick={(event) => this.clickLogoff(event)} ><FontAwesomeIcon icon={faSignOutAlt}/> Sair</a>\n                            </li>\n                            </>\n                        :\n                            <>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/cadastro\"><FontAwesomeIcon icon={faUserEdit}/> Cadastro</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link\" href=\"/login\"><FontAwesomeIcon icon={faSignInAlt}/> Login</a>\n                            </li>\n                            </>\n                        }\n                        <li className=\"nav-item\">\n                            <a className=\"nav-link\" href=\"/sobre\"><FontAwesomeIcon icon={faUserCog}/> Sobre</a>\n                        </li>\n                    </ul>\n\n                </div>\n            </div>\n        </nav>\n        <Modal modal=\"login\" dados={this.state.responseData} show={this.state.showModal} close={(show) => this.setState({showModal: show, responseData: {}})}/>\n        </>\n      );\n    }\n}\n\nexport default Header;\n","import React, { Component } from 'react';\nimport NumberFormat from 'react-number-format';\nimport axios from 'axios';\nimport moment from 'moment';\n\nimport Header from '../components/Header';\nimport Modal from '../components/Modal';\nimport './Compra.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons';\n\nclass Compra extends Component {\n    state = {\n        codigo: '',\n        data: '',\n        valor: 0,\n        showModal: false,\n        responseData: {}\n    }\n\n    componentDidMount() {\n        const { match: { params } } = this.props;\n        if(params.id) {\n            axios.get('/api/v1/compras/'+params.id).then((res) => {\n                let ret = res.data;\n                console.log('compra: ', ret);\n                this.setState({\n                    codigo: ret.data.codigo,\n                    data: moment(ret.data.data).format('YYYY-MM-DD'),\n                    valor: ret.data.valor.toString().replace('.', ',')\n                }); \n            }).catch((error) => {\n              console.log(error);\n            });\n        }\n    }\n\n    clickSalvar() {\n        if(this.state.codigo.length > 0 && this.state.data.length > 0 && this.state.valor > 0) {\n            axios.post('/api/v1/compras', {\n                codigo: this.state.codigo,\n                data: this.state.data,\n                valor: this.state.valor\n            }).then((res) => {\n                let data = res.data;\n                console.log('compras: ', data);\n                if(data.status === 'ok') {\n                    window.location = '/compras';\n                } else {\n                    this.setState({ responseData: data, showModal: true });\n                } \n            }).catch((error) => {\n                console.log(error);\n            });\n        } else {\n            this.setState({ responseData: {\n                status: 'error',\n                'data': 'Insira todos os dados da compra!'\n            }, showModal: true });\n        }\n    }\n\n    handleChange(event, maskedvalue, floatvalue){\n        this.setState({valor: floatvalue});\n    }\n  \n    render() {\n        return (\n            <>\n            <Header />\n            <main className=\"app-form\">\n                <div className=\"cotainer\">\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-md-8\">\n                            <div className=\"card\">\n                                <div className=\"card-header\"><FontAwesomeIcon icon={faShoppingCart}/> Compra</div>\n                                <div className=\"card-body\">\n                                    <form>\n                                        <div className=\"form-group row\">\n                                            <label htmlFor=\"codigo\" className=\"col-md-4 col-form-label text-md-right\">Código</label>\n                                            <div className=\"col-md-2\">\n                                                <input type=\"text\" id=\"codigo\" className=\"form-control\" name=\"codigo\" \n                                                    onChange={(event) => this.setState({codigo: event.target.value})} \n                                                    defaultValue={this.state.codigo} required autoFocus/>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group row\">\n                                            <label htmlFor=\"data\" className=\"col-md-4 col-form-label text-md-right\">Data</label>\n                                            <div className=\"col-md-3\">\n                                                <input type=\"date\" id=\"data\" className=\"form-control\" name=\"data\" max={moment().format('YYYY-MM-DD')}\n                                                    onChange={(event) => this.setState({data: event.target.value})} \n                                                    defaultValue={this.state.data} required/>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group row\">\n                                            <label htmlFor=\"valor\" className=\"col-md-4 col-form-label text-md-right\">Valor</label>\n                                            <div className=\"col-md-3\">\n                                                <NumberFormat prefix=\"R$ \" decimalSeparator=\",\" thousandSeparator=\".\" decimalScale=\"2\" allowNegative={false}\n                                                    id=\"valor\" className=\"form-control\" name=\"valor\" fixedDecimalScale={true}\n                                                    onValueChange={(object) => this.setState({valor: object.value})}\n                                                    defaultValue={this.state.valor} required/>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"col-md-6 offset-md-4\">\n                                            <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.clickSalvar()}>\n                                                Salvar\n                                            </button>\n                                        </div>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </main>\n            <Modal modal=\"login\" dados={this.state.responseData} show={this.state.showModal} close={(show) => this.setState({showModal: show, responseData: {}})}/>\n            </>\n        );\n    }\n}\n\nexport default Compra;\n"],"sourceRoot":""}